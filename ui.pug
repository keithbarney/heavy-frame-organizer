doctype html
html(lang="en")

  head
    meta(charset="UTF-8")
    title Heavy Frame Organizer
    link(rel="stylesheet" href="styles.css")

  body
    .container 
        h3 Set Spacing

        .form-container
            .form-group
                label(for="horizontalSpacing") Horizontal Spacing:
                input#horizontalSpacing(type="number" value="500")

            .form-group 
                label(for="verticalSpacing") Vertical Spacing:
                input#verticalSpacing(type="number" value="500")

        button#apply Apply

    script.
      function resizeToFit() {
          const width = document.documentElement.scrollWidth;
          const height = document.documentElement.scrollHeight;

          console.log(`ðŸ“ Resizing to ${width}x${height}`);

          parent.postMessage({ pluginMessage: { type: "resize", width, height } }, "*");
      }

      // Resize when the page loads
      window.onload = resizeToFit;

      // Resize when receiving the "request-resize" message
      window.addEventListener("message", (event) => {
          if (event.data.pluginMessage?.type === "request-resize") {
              resizeToFit();
          }
      });

      // Resize if the content changes dynamically
      new ResizeObserver(resizeToFit).observe(document.body);

      // Apply button logic
      document.getElementById("apply").addEventListener("click", () => {
          const horizontalSpacing = parseInt(document.getElementById("horizontalSpacing").value, 10);
          const verticalSpacing = parseInt(document.getElementById("verticalSpacing").value, 10);

          parent.postMessage({
              pluginMessage: {
                  type: "apply-spacing",
                  horizontalSpacing,
                  verticalSpacing
              }
          }, "*");
      });